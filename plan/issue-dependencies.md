# Issue Dependency Mapping

## チェックリスト
- [x] GitHub Issues 本文を収集して依存候補を抽出
- [x] Issue ごとの背景・完了条件を確認
- [ ] メンテナと依存関係の合意形成（フォローアップ）

## 主要依存チェーン
- フェーズ0の基盤 (#1~#5) がシグナリング実装 (#6) を支え、その上に配信/視聴 UI (#7/#8) と運用改善 (#9/#10) が積み上がる。
- シグナリング (#6) 完了後でないと配信/視聴 UI やチャット (#7/#8/#15)、レイテンシ調査 (#9)、TURN/SFU 調査 (#18) や peer ID 問題修正 (#28) に着手できない。
- 運用系 (#11~#14) はフェーズ0完了と運用改善 (#10) を前提にし、デプロイ (#14) は CI (#4) と Docker 化 (#11) の完了が条件。
- 機能拡張 (#15~#19) は MVP 完了 (#6~#10) と認証基盤 (#16) の依存を踏まえて段階的に進める。

## 依存関係一覧（ドラフト）
| Issue | 状態 | 直接の前提 | 根拠メモ |
| ----- | ---- | ---------- | -------- |
| #1 フロントエンド環境初期化 | closed | — | フロント全般の土台。以降の FE 作業 (#3/#5/#7/#8/#10/#15/#19) で前提扱い。
| #2 バックエンド環境初期化 | closed | — | サーバと API の土台。シグナリング (#6)、ログ (#10)、運用 (#11~#14/#16/#17/#18/#28) の前提。
| #3 コーディング規約整備 | closed | #1 #2 | ESLint/gofmt 適用対象が両環境のため。CI (#4) やテスト基盤 (#12) で利用。
| #4 CI パイプライン整備 | closed | #1 #2 #3 | CI で lint/test 実行するため基盤と規約が前提。デプロイ (#14) の前提。
| #5 開発コマンド整備 | closed | #1 #2 #3 | FE/BE コマンド統合には環境と lint 設定が必要。Docker 化 (#11) や後続作業の DX を支える。
| #6 WebRTC シグナリング API | closed | #2 #5 | サーバ基盤 (#2) と開発コマンド (#5) を活用して実装。配信/視聴 UI (#7/#8) や WebSocket 系機能の必須前提。
| #7 配信者 UI | closed | #1 #6 | UI 実装とシグナリング連携を本文で明記。チャット (#15)、モバイル対応 (#19)、レイテンシ調査 (#9) にも影響。
| #8 視聴者 UI | closed | #1 #6 | 本文で「関連: #6」。視聴体験を提供し、レイテンシ調査 (#9)・モバイル対応 (#19)・peer ID 修正 (#28) の前提。
| #9 レイテンシ測定スパイク | closed | #6 #7 #8 | 遅延測定には送受信フローが必要。Issue 本文で計測フロー前提を説明。
| #10 エラーハンドリングとログ | closed | #2 #6 #7 #8 | 代表シナリオが配信/視聴/シグナリングに跨る。運用/監視 (#11~#13) や不具合調査 (#28) の基盤。
| #11 Docker/Compose 統合 | open | #1 #2 #5 | 各サービスの稼働とコマンド整備後にコンテナ化が現実的。CI/デプロイ (#4/#14) と連動予定。
| #12 自動テスト基盤拡張 | open | #1 #2 #3 #4 | Lint/CI とコード基盤が整っている前提で拡張テストを設計。
| #13 モニタリング/アラート | open | #2 #10 | システムログ/エラー整備 (#10) とサーバ基盤 (#2) を活用してメトリクス化。
| #14 デプロイパイプライン | open | #4 #5 #11 | CI での検証 (#4) とコマンド整備 (#5)、Docker 化 (#11) を土台に自動デプロイを構築。
| #15 コメント機能 | open | #1 #2 #6 #7 #8 | リアルタイム通信はシグナリング基盤 (#6) や既存 UI との統合が必要。新 UI は FE/BE 基盤に依存。
| #16 ユーザー認証・ログイン | open | #2 #10 | サーバ側実装が中心で、ログ/エラー方針 (#10) を踏まえた保守性が必要。
| #17 配信スケジュール/アーカイブ | open | #2 #10 #16 | バックエンド機能とアクセス制御 (#16) を前提に、ログ/監査要件 (#10) に沿って実装。
| #18 TURN/SFU スパイク | open | #6 #7 #8 #9 | 現行シグナリングと配信/視聴フローを踏まえて評価する調査。レイテンシ測定結果 (#9) が比較材料。
| #19 モバイル最適化 UI | open | #1 #7 #8 | 既存 UI をベースにレスポンシブ化。FE 基盤完了が前提。
| #28 peer ID 衝突対応 | open | #6 #7 #8 #10 | 再現手順が配信/視聴 UI とシグナリングに依存。エラーハンドリング (#10) 整備を活かして解決。

## 並行開発候補
- [ ] #11 Docker/Compose 統合 — 前提(#1/#2/#5)済み。環境差異に注意しつつ他タスクと独立して作業可。
- [ ] #12 自動テスト基盤拡張 — フェーズ0/CI完了後の拡張。既存コードを改善するタスクと併走可能。
- [ ] #13 モニタリング/アラート — サーバ基盤(#2)とログ基盤(#10)が整備済みで単独着手可能。
- [ ] #15 コメント機能 — シグナリング/配信視聴UIが揃っており、UI拡張として並列進行が可能。
- [ ] #16 ユーザー認証・ログイン — バックエンド中心で既存実装への影響を調整しつつ進められる。
- [ ] #18 TURN/SFU スパイク — 現行構成を踏まえた調査タスクで、実装タスクと時間的に並行しやすい。
- [ ] #19 モバイル最適化 UI — 既存UIをベースにした改善で、他バックエンドタスクと衝突が少ない。
- [ ] #28 peer ID 衝突対応 — 既存機能のバグ修正で優先度に応じて即時対応可能。

**ブロック中**
- [ ] #14 デプロイパイプライン — #11 の完了後に着手。
- [ ] #17 配信スケジュール/アーカイブ — #16 の認証が前提。

## 未確定事項メモ
- [ ] Issue 作成者へ依存関係ドラフトのレビューを依頼し、補足情報（特に #12/#13 の順序）を確認する。
- [ ] Projects での依存管理ルール（issue dependency機能）を利用するか検討。

